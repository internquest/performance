'use client'
import React, { useEffect, useRef, useState } from 'react'

const Loader = ({loading,setLoading}) => {
    // const elementRef = useRef(null);
    const loadingicon=useRef(null)
        const loader=useRef(null)
        const loaderlogo=useRef(null)
        const iconwrapper=useRef(null)
const [times,setTimes]=useState(0)
    // Animation function
    const animateRotateWithDelay = (element, startValue, endValue, stepValue, durationPerStep, delayPerStep) => {
      let currentValue = startValue;
  
      const step = () => {
        if (currentValue >= endValue) return; // Stop when the rotation reaches the end value
  
        const targetValue = currentValue + stepValue;
  
        const startTime = performance.now();
  
        const animateStep = (currentTime) => {
          const elapsedTime = currentTime - startTime;
          const progress = Math.min(elapsedTime / durationPerStep, 1); // Clamp progress between 0 and 1
          const interpolatedValue = currentValue + (targetValue - currentValue) * progress;
  
          // Apply the rotation
          element.style.transform = `rotate(${interpolatedValue}deg)`;
  
          if (progress < 1) {
            requestAnimationFrame(animateStep); // Continue animation
          } else {
            setTimes((prevTimes) => prevTimes + 1);
            currentValue = targetValue; // Update the current value
            setTimeout(step, delayPerStep); // Start the next step after a delay
          }
        };
  
        requestAnimationFrame(animateStep); // Start the animation for the current step
      };
  
      step(); // Start the first step
    };
    function animateTransform(element, startValue, endValue, duration) {
        const startTime = performance.now();
      
        function step(currentTime) {
          const elapsedTime = currentTime - startTime;
          const progress = Math.min(elapsedTime / duration, 1); // Clamp progress between 0 and 1
      
          const currentValue = startValue + (endValue - startValue) * progress;
      
          element.style.opacity = currentValue; // Example: translateX
      
          if (progress < 1) {
            requestAnimationFrame(step);
          }
        }
      
        requestAnimationFrame(step);
      }
      function animatescalndopac  (element, opacstart,opacend,scalestartValue,scaleendValue ,duration) {
        const startTime = performance.now();
      
        function step(currentTime) {
          const elapsedTime = currentTime - startTime;
          const progress = Math.min(elapsedTime / duration, 1); // Clamp progress between 0 and 1
      
        //   const xcurrentValue = xstartValue + (xendValue - xstartValue) * progress;
        //   const ycurrentValue = ystartValue + (yendValue - ystartValue) * progress;
          const scalecurrentValue = scalestartValue + (scaleendValue - scalestartValue) * progress;
          const opac= opacstart + (opacend - opacstart) * progress;
    //   if(perc){
    
        element.style.transform = ` scale(${scalecurrentValue})`;
        element.style.opacity = opac;
    //   }else{
        // element.style.transform = `translate(${xcurrentValue}px, ${ycurrentValue}px) scale(${scalecurrentValue})`;
    
    //   }
      
          if (progress < 1) {
            requestAnimationFrame(step);
          }
        }
      
        requestAnimationFrame(step);
      }
      useEffect(() => {
        
        if(times===2){
          // setLoading(false)
          animateTransform(loader.current, 1, 0, 2000);
          animateTransform(loaderlogo.current, 1, 0, 400);
          animatescalndopac(iconwrapper.current,1,0,1,.85,400)
        }
      },[times])
//   console.log(times);
  
    useEffect(() => {
    //   if (elementRef.current) {
    //    console.log(loadingicon,loader,loaderlogo,iconwrapper);
       
        animateRotateWithDelay(loadingicon.current, 0, 180, 90, 300, 200);

    //   }
    }, []);
  return (
    <div ref={loader} className="c-loader" >
  <div className="c-loader-logo-outer">
    <div className="c-loader-logo-inner">
      <div ref={loaderlogo} className="c-loader-logo" >
        <svg
          className="site-logo"
          width={147}
          height={24}
          viewBox="0 0 147 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g className="site-logo-type">
            <path
              d="M28.8526 10.9772C29.088 9.82025 29.6222 8.87847 30.5007 8.17214C31.3792 7.46582 32.407 7.10126 33.5842 7.12404C34.7615 7.1443 35.7691 7.50885 36.6045 8.21518C37.4399 8.92151 37.9741 9.84303 38.2096 10.9772H28.8526ZM33.8399 5.47594C32.0197 5.36961 30.4577 5.98987 29.1083 7.31645C27.7817 8.62278 27.1387 10.2076 27.1817 12.0278C27.202 13.762 27.8678 15.2405 29.1513 16.5038C30.4349 17.7443 31.9134 18.3443 33.5842 18.324C34.9108 18.3038 36.1108 17.9164 37.202 17.1468C38.2931 16.3772 39.0653 15.3266 39.5134 14.0202H37.7792C36.9437 15.7747 35.5741 16.6759 33.6475 16.6962C32.407 16.719 31.3361 16.3114 30.4146 15.519C29.4931 14.7266 28.9792 13.6987 28.8526 12.4785H39.8146V11.6C39.8146 10.081 39.2374 8.70885 38.0804 7.4886C36.8804 6.24556 35.4678 5.58227 33.8399 5.47594Z"
              fill="currentColor"
            />
            <path
              d="M43.7097 7.19999V5.4886H42.2109V17.5266H42.216C42.2413 17.9696 42.6059 18.324 43.0565 18.324C43.5071 18.324 43.8717 17.9721 43.897 17.5266H43.9021V10.324C43.9021 9.54176 44.0287 8.9291 44.3021 8.46581C44.4717 8.19239 44.7882 7.85315 45.2514 7.47341C45.7173 7.09366 46.3299 6.881 47.0666 6.86075V5.25569C46.4337 5.23543 45.8211 5.38227 45.2084 5.69872C44.5552 6.05822 44.0489 6.54429 43.7097 7.19999Z"
              fill="currentColor"
            />
            <path
              d="M49.4688 5.25063V17.5266H49.4713C49.4814 17.9671 49.8384 18.3241 50.2839 18.3241C50.727 18.3241 51.0865 17.9696 51.0966 17.5266H51.0991V6.96203H54.1194V5.48354H51.0991V4.97722C51.0991 4.40759 51.3725 3.85823 51.9017 3.28608C52.2612 2.92658 52.8536 2.73671 53.6966 2.69367L54.1194 2.67342V1.23544H53.6966C51.2232 1.23544 49.4688 2.69367 49.4688 5.25063Z"
              fill="currentColor"
            />
            <path
              d="M64.4744 15.319C63.5327 16.3266 62.3985 16.7747 61.0491 16.7114C59.7858 16.6684 58.7377 16.1772 57.8592 15.2127C56.9808 14.2481 56.5757 13.1139 56.5959 11.8304C56.6187 10.5241 57.0668 9.43292 57.9884 8.5114C58.9099 7.58988 60.001 7.11899 61.3073 7.14178C62.5478 7.14178 63.5985 7.59241 64.477 8.5114C65.3554 9.43292 65.8263 10.5241 65.8694 11.8076C65.8896 13.157 65.439 14.3139 64.4744 15.319ZM61.3909 5.53418C59.6339 5.47089 58.1149 6.09114 56.8516 7.37469C55.5884 8.63798 54.9453 10.1798 54.9453 11.957C54.9453 13.6709 55.5225 15.1468 56.6997 16.3899C57.877 17.6304 59.3327 18.2734 61.0238 18.3165C62.7782 18.3798 64.2997 17.7595 65.563 16.4962C66.8491 15.2127 67.4896 13.6911 67.4896 11.9367C67.4896 10.2228 66.8896 8.74684 65.7124 7.5038C64.5402 6.24304 63.0846 5.60001 61.3909 5.53418Z"
              fill="currentColor"
            />
            <path
              d="M71.3944 7.20252V5.4886H69.8906V17.5544H69.8957C69.921 18 70.2856 18.3519 70.7387 18.3519C71.1919 18.3519 71.5564 17.9975 71.5818 17.5544H71.5868V10.3367C71.5868 9.55442 71.7134 8.93923 71.9894 8.47341C72.159 8.19746 72.4754 7.86075 72.9413 7.47847C73.4071 7.09872 74.0197 6.88607 74.7615 6.86581V5.25822C74.1261 5.23797 73.5134 5.3848 72.8982 5.70379C72.24 6.06075 71.7311 6.54683 71.3944 7.20252Z"
              fill="currentColor"
            />
            <path
              d="M89.3386 5.54937C87.6247 5.40506 86.2602 6.14937 85.2475 7.73924C84.2349 6.14937 82.8703 5.40506 81.1564 5.54937C79.8754 5.65316 78.8424 6.12911 78.0576 6.97468C77.2095 7.86329 76.7969 9.06076 76.7969 10.5291V17.5747H76.7994C76.8146 18.0076 77.169 18.3544 77.6045 18.3544C78.0399 18.3544 78.3943 18.0076 78.4095 17.5747H78.4273V10.3418C78.4273 9.41266 78.6754 8.6481 79.1918 8.0076C79.7083 7.36709 80.3893 7.03544 81.2374 7.03544C82.1057 7.03544 82.85 7.32405 83.4678 7.88354C84.1083 8.44051 84.4171 9.1443 84.4171 9.99241V17.5266H84.4146L84.4171 17.5392V17.5747H84.4197C84.445 18.0076 84.8019 18.3544 85.2424 18.3544C85.683 18.3544 86.0399 18.0101 86.0652 17.5747H86.0703V9.98987C86.0703 9.14177 86.3817 8.44051 86.9994 7.88101C87.6399 7.32405 88.3842 7.03291 89.2526 7.03291C90.1007 7.03291 90.8019 7.36456 91.3184 8.00506C91.8349 8.64557 92.1032 9.43038 92.1032 10.3392V17.5722H92.1083C92.1285 18.0051 92.483 18.3519 92.9209 18.3519C93.3589 18.3519 93.7133 18.0051 93.7336 17.5722H93.7361V10.5291C93.7361 9.06076 93.3032 7.86329 92.4551 6.97468C91.6526 6.12658 90.6197 5.65063 89.3386 5.54937Z"
              fill="currentColor"
            />
            <path
              d="M105.353 14.9468C104.439 15.9013 103.34 16.357 102.031 16.2962C100.829 16.2329 99.7906 15.757 98.94 14.8228C98.0893 13.8886 97.6944 12.7899 97.7147 11.5443C97.7349 10.2785 98.1704 9.22026 99.064 8.32659C99.9577 7.43292 101.016 6.99748 102.282 6.99748C103.487 6.99748 104.522 7.43292 105.375 8.32659C106.226 9.21773 106.682 10.2785 106.705 11.5215C106.722 12.8304 106.287 13.9722 105.353 14.9468ZM108.279 11.7317V11.6481C108.343 10.0076 107.78 8.57722 106.618 7.37216C105.456 6.14684 104.046 5.52406 102.386 5.4633C100.664 5.40001 99.1906 5.98229 97.9653 7.22786C96.74 8.45317 96.1172 9.94684 96.1172 11.6684C96.1172 13.3291 96.6969 14.7595 97.8387 15.9646C98.9805 17.1671 100.37 17.7899 102.011 17.8532C103.879 17.9165 105.456 17.2101 106.743 15.7367V17.5848C106.748 18.0051 107.089 18.3468 107.512 18.3468C107.937 18.3468 108.282 18.0025 108.282 17.5772H108.277V11.7317H108.279Z"
              fill="currentColor"
            />
            <path
              d="M115.946 5.43292C114.427 5.43292 113.176 5.95444 112.178 6.97469C111.178 7.99495 110.68 9.2633 110.68 10.8051V17.5696H110.682C110.692 18.0051 111.044 18.3544 111.482 18.3544C111.92 18.3544 112.272 18.0051 112.282 17.5696H112.285V10.638C112.285 9.63799 112.639 8.78482 113.368 8.05571C114.097 7.32659 114.971 6.97216 115.951 6.97216C116.928 6.97216 117.761 7.32659 118.49 8.05571C119.219 8.78482 119.594 9.63799 119.594 10.638V17.5696H119.596C119.604 18.0051 119.958 18.3544 120.396 18.3544C120.834 18.3544 121.186 18.0051 121.196 17.5696H121.199V10.8025C121.199 9.2633 120.7 7.99242 119.7 6.97216C118.692 5.95444 117.444 5.43292 115.946 5.43292Z"
              fill="currentColor"
            />
            <path
              d="M135.647 11.0101C135.882 9.85317 136.417 8.9114 137.295 8.20507C138.174 7.49874 139.201 7.13419 140.379 7.15444C141.556 7.17722 142.563 7.53925 143.396 8.24558C144.232 8.95191 144.766 9.87343 145.001 11.0076H135.647V11.0101ZM146.609 11.6304C146.609 10.1114 146.032 8.73925 144.875 7.519C143.675 6.27596 142.262 5.61267 140.637 5.50634C138.817 5.40001 137.255 6.02026 135.905 7.34684C134.579 8.65317 133.936 10.238 133.979 12.0557C133.999 13.7899 134.665 15.2684 135.948 16.5317C137.234 17.7722 138.71 18.3722 140.381 18.3519C141.708 18.3317 142.908 17.9443 143.999 17.1747C145.09 16.4051 145.862 15.3544 146.31 14.0481H144.576C143.741 15.8025 142.371 16.7038 140.444 16.7241C139.201 16.7443 138.133 16.3392 137.212 15.5468C136.29 14.7544 135.776 13.7266 135.649 12.5063H146.612V11.6304H146.609Z"
              fill="currentColor"
            />
            <path
              d="M131.681 14.4152C131.57 12.8253 130.659 11.7443 128.967 11.1924L127.499 10.7266C126.365 10.3671 125.808 9.75189 125.876 8.88354C125.899 7.95189 126.694 7.22531 127.651 7.20506C128.631 7.20506 129.332 7.71139 129.633 8.58734C129.659 8.65822 129.724 8.97468 129.735 9.02278L129.737 9.03038V9.03291C129.823 9.37974 130.135 9.63544 130.507 9.63544C130.932 9.63544 131.276 9.30126 131.299 8.88101H131.302C131.302 8.88101 131.317 8.76455 131.302 8.55696C131.243 7.70886 130.813 7.02025 130.056 6.4481C129.322 5.87594 128.522 5.6 127.654 5.64303C126.654 5.68607 125.808 6.04557 125.094 6.70379C124.405 7.36202 124.071 8.16708 124.114 9.09873C124.18 10.6456 125.005 11.6633 126.562 12.1291L128.053 12.5747C129.299 12.957 129.922 13.6557 129.899 14.6937C129.876 15.2886 129.699 15.7747 129.322 16.1342C128.899 16.5367 128.421 16.7367 127.631 16.7494C127.097 16.757 126.55 16.5696 126.043 16.1342C125.545 15.7063 125.39 15.3873 125.291 14.9038C125.251 14.7038 125.238 14.4405 125.238 14.4405C125.218 14.0177 124.871 13.6785 124.443 13.6785C124.016 13.6785 123.669 14.0152 123.648 14.438V14.4405C123.648 15.4785 124.005 16.3671 124.717 17.1089C125.451 17.8506 126.342 18.2734 127.408 18.3392C128.565 18.4025 129.588 18.043 130.479 17.2582C131.37 16.4506 131.77 15.4987 131.681 14.4152Z"
              fill="currentColor"
            />
          </g>
          <path
            className="site-logo-symbol"
            d="M6.61896 20.7114C5.77845 20.7317 5.07972 20.0962 5.05947 19.2937C5.03921 18.4886 5.70504 17.8203 6.54807 17.8C7.38858 17.7798 8.08732 18.4152 8.10757 19.2177C8.12529 20.0203 7.45947 20.6886 6.61896 20.7114ZM14.0392 0.0810242C7.45947 0.0810242 2.12529 5.4152 2.12529 11.9975C2.12529 13.2532 2.262 14.2684 2.62149 15.4025C1.93035 15.2582 -0.289899 14.3798 0.0316199 15.9949C0.451873 18.0911 4.36327 22.7595 9.68732 23.638C9.98858 23.6886 10.2721 23.4608 10.2696 23.0279V22.7266L10.3101 11.9317C10.3101 11.9317 10.3101 11.8633 10.3101 11.8405C10.3177 9.95444 11.0139 8.32406 12.3759 6.97216C13.7607 5.59748 15.3962 4.93672 17.2823 5.01267C19.1 5.06583 20.6392 5.7595 21.8974 7.09875C23.1582 8.43799 23.7962 10.0279 23.7886 11.8658C23.781 13.7747 23.0848 15.4279 21.7228 16.8051C20.3607 18.157 18.7253 18.8177 16.8392 18.7418C15.9455 18.7063 15.1253 18.5089 14.3683 18.1696C14.3025 18.1443 14.2316 18.1139 14.1607 18.0785C14.1379 18.0684 14.1126 18.0582 14.0898 18.0481V18.043C13.6088 17.7949 13.0772 17.362 13.0417 16.7975C12.9962 16.0785 13.6721 15.7823 14.0974 16.0532C14.9177 16.6911 15.8721 17.0127 16.9607 17.0152C18.3405 17.0203 19.5152 16.5418 20.5076 15.557C21.5 14.5722 22.0114 13.4 22.0392 11.9975C22.0671 10.6177 21.6114 9.42026 20.6721 8.38229C19.7329 7.34431 18.6088 6.78735 17.2493 6.73672C15.8012 6.6633 14.581 7.14178 13.5405 8.21773C12.5455 9.27343 12.0291 10.4836 12.0266 11.8937L12.0088 16.4203L11.9734 21.1114C11.9734 21.1114 11.9633 22.0658 11.9683 22.5798C11.9683 22.5798 11.9734 22.838 11.9734 23.2582C11.9734 23.5924 12.2544 23.8608 12.8063 23.9063C13.2747 23.9443 13.7379 23.9266 14.2139 23.9114C20.8645 23.6734 25.9506 18.5798 25.9506 12C25.9531 5.4152 20.619 0.0810242 14.0392 0.0810242Z"
            fill="currentColor"
          />
        </svg>
      </div>
    </div>
  </div>
  <div
  ref={iconwrapper}
    className="c-loader-icon-wrapper"
    style={{ transform: "scale(1)", opacity: 1 }}
  >
    <div ref={loadingicon} className="c-loader-icon" >
      <svg
        width={56}
        height={112}
        viewBox="0 0 56 112"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <rect
          className="c-loader-icon-bg--1"
          x={0}
          y={0}
          width={56}
          height={56}
          fill="var(--loader-icon-bg-fill-1)"
        />
        <rect
          className="c-loader-icon-bg--2"
          x={0}
          y={56}
          width={56}
          height={56}
          fill="var(--loader-icon-bg-fill-2)"
        />
        <rect
          className="c-loader-icon-symbol--1"
          x={16}
          y={16}
          width={24}
          height={24}
          rx={12}
          fill="var(--loader-icon-symbol-fill-1)"
        />
        <rect
          className="c-loader-icon-symbol--2"
          x={16}
          y={72}
          width={24}
          height={24}
          rx={0}
          fill="var(--loader-icon-symbol-fill-2)"
        />
      </svg>
    </div>
  </div>
</div>

  )
}

export default Loader